<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <form action="" id="userInfo">
    </form>
    <script src="node_modules/art-template/lib/template-web.js"></script>
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script type="text/template" id="tpl">
        <div>
            <label for="">用户名:</label>
            <input type="text" value="{{ user.username }}">
        </div>
        <div>
            <label for="">年龄:</label>
            <input type="text" value="{{ user.age }}">
        </div>
        <div>
          <label for="">职业:</label>
          <select id="">
            <option value="">学生</option>
            <option value="">老师</option>
            <option value="">程序员</option>
            <option value="">医生</option>
          </select>
        </div>
    </script>
    <script type="text/javascript">

      // 这个 get 是 callback 方式的 API
      // 可以使用 Promise 来解决这个问题
      function get(url, callback) {
          var oReq = new XMLHttpRequest()
          // 当请求加载成功之后要调用指定的函数
          oReq.onload = function() {
              // 我现在需要得到这里的 oReq.responseText
              callback(oReq.responseText)
          }
          oReq.open("get", url, true)
          oReq.send()
      }

      //
      get("http://localhost:3000/users/1",function(userdata){
        var htmlStr = template('tpl',{
          user:JSON.parse(userdata)
        })
        console.log(htmlStr)
        document.querySelector('#userInfo').innerHTML = htmlStr
      })
    </script>
</body>

</html>


